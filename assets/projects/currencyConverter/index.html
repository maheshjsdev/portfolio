<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency | Converter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<style>
    .form-select-lg {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
        padding-left: 1rem;
        font-size: 14px;
    }

    button.btn.btn-secondary.convertBtn {
        margin-top: 21px;
    }

    .col-md-4.btnBlock {
        display: flex;
        align-items: center;
        justify-content: center;
</style>

<body>
    <div class="container">
        <h1 class="my-3">Currency Converter</h1>
        <hr>
        <div class="row mt-3">
            <div class="col-md-12 mt-3">
                <form>
                    <label>Amount to convert</label>
                    <div class="row">
                        <div class="col-md-4 my-2">
                            <input type="number" name="amount" placeholder="Amount" class="form-control">
                        </div>
                    </div>
                    <div class="row my-5">
                        <div class="col-md-4">
                            <label class="my-2">From</label>

                            <select id="fromCurrency" class="form-select form-select-lg mb-3">
                                <option value="">Select One …</option>
                                <option value="USD">USD</option>
                                <option value="AED">AED</option>
                                <option value="ARS">ARS</option>
                                <option value="AUD">AUD</option>
                                <option value="BGN">BGN</option>
                                <option value="BRL">BRL</option>
                                <option value="BSD">BSD</option>
                                <option value="CAD">CAD</option>
                                <option value="CHF">CHF</option>
                                <option value="CLP">CLP</option>
                                <option value="CNY">CNY</option>
                                <option value="COP">COP</option>
                                <option value="CZK">CZK</option>
                                <option value="DKK">DKK</option>
                                <option value="DOP">DOP</option>
                                <option value="EGP">EGP</option>
                                <option value="EUR">EUR</option>
                                <option value="FJD">FJD</option>
                                <option value="GBP">GBP</option>
                                <option value="GTQ">GTQ</option>
                                <option value="HKD">HKD</option>
                                <option value="HRK">HRK</option>
                                <option value="HUF">HUF</option>
                                <option value="IDR">IDR</option>
                                <option value="ILS">ILS</option>
                                <option value="INR">INR</option>
                                <option value="ISK">ISK</option>
                                <option value="JPY">JPY</option>
                                <option value="KRW">KRW</option>
                                <option value="KZT">KZT</option>
                                <option value="MVR">MVR</option>
                                <option value="MXN">MXN</option>
                                <option value="MYR">MYR</option>
                                <option value="NOK">NOK</option>
                                <option value="NZD">NZD</option>
                                <option value="PAB">PAB</option>
                                <option value="PEN">PEN</option>
                                <option value="PHP">PHP</option>
                                <option value="PKR">PKR</option>
                                <option value="PLN">PLN</option>
                                <option value="PYG">PYG</option>
                                <option value="RON">RON</option>
                                <option value="RUB">RUB</option>
                                <option value="SAR">SAR</option>
                                <option value="SEK">SEK</option>
                                <option value="SGD">SGD</option>
                                <option value="THB">THB</option>
                                <option value="TRY">TRY</option>
                                <option value="TWD">TWD</option>
                                <option value="UAH">UAH</option>
                                <option value="UYU">UYU</option>
                                <option value="ZAR">ZAR</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="my-2">To</label>
                            <select id="toCurrency" class="form-select form-select-lg mb-3">
                                <option value="">Select One …</option>
                                <option value="USD">USD</option>
                                <option value="AED">AED</option>
                                <option value="ARS">ARS</option>
                                <option value="AUD">AUD</option>
                                <option value="BGN">BGN</option>
                                <option value="BRL">BRL</option>
                                <option value="BSD">BSD</option>
                                <option value="CAD">CAD</option>
                                <option value="CHF">CHF</option>
                                <option value="CLP">CLP</option>
                                <option value="CNY">CNY</option>
                                <option value="COP">COP</option>
                                <option value="CZK">CZK</option>
                                <option value="DKK">DKK</option>
                                <option value="DOP">DOP</option>
                                <option value="EGP">EGP</option>
                                <option value="EUR">EUR</option>
                                <option value="FJD">FJD</option>
                                <option value="GBP">GBP</option>
                                <option value="GTQ">GTQ</option>
                                <option value="HKD">HKD</option>
                                <option value="HRK">HRK</option>
                                <option value="HUF">HUF</option>
                                <option value="IDR">IDR</option>
                                <option value="ILS">ILS</option>
                                <option value="INR">INR</option>
                                <option value="ISK">ISK</option>
                                <option value="JPY">JPY</option>
                                <option value="KRW">KRW</option>
                                <option value="KZT">KZT</option>
                                <option value="MVR">MVR</option>
                                <option value="MXN">MXN</option>
                                <option value="MYR">MYR</option>
                                <option value="NOK">NOK</option>
                                <option value="NZD">NZD</option>
                                <option value="PAB">PAB</option>
                                <option value="PEN">PEN</option>
                                <option value="PHP">PHP</option>
                                <option value="PKR">PKR</option>
                                <option value="PLN">PLN</option>
                                <option value="PYG">PYG</option>
                                <option value="RON">RON</option>
                                <option value="RUB">RUB</option>
                                <option value="SAR">SAR</option>
                                <option value="SEK">SEK</option>
                                <option value="SGD">SGD</option>
                                <option value="THB">THB</option>
                                <option value="TRY">TRY</option>
                                <option value="TWD">TWD</option>
                                <option value="UAH">UAH</option>
                                <option value="UYU">UYU</option>
                                <option value="ZAR">ZAR</option>
                            </select>
                        </div>
                        <div class="col-md-4 btnBlock"><button class="btn btn-secondary convertBtn"
                                type="submit">Convert</button></div>
                    </div>


                </form>
            </div>
        </div>

        <table class="table my-5">
            <thead>
                <tr>
                    <th scope="col">Country code</th>
                    <th scope="col">Value</th>
                </tr>
            </thead>
            <tbody>

            </tbody>
        </table>

    </div>


    <script>
        // Some variables
        let fromCurrency = document.getElementById("fromCurrency");
        let toCurrency = document.getElementById("toCurrency");
        let submitBtn = document.querySelector(".convertBtn")
        let resultFrom, resultTo, str, searchValue;

        // Api function
        const populate = async () => {
            url = "https://api.exchangerate-api.com/v4/latest/USD";
            let response = await fetch(url)
            let rJson = await response.json()
            var data = rJson;
            displayResults(data)

        }


        // get input amount
        let amt = document.querySelector("input[name='amount']");
        amt.addEventListener('input', updateValue);
        function updateValue(e) {
            searchValue = e.target.value;
        }

        // From currency
        fromCurrency.addEventListener('change', (e) => {
            resultFrom = e.target.value;
        })

        // To currency 
        toCurrency.addEventListener('change', (e) => {
            resultTo = e.target.value;
        })

        // displaying result
        function displayResults(currency) {
            let fromRate = currency.rates[resultFrom];
            let toRate = currency.rates[resultTo];
            str = `<tr>
                <td> Converted amount ${resultFrom} to ${resultTo}</td>
                <td>${((toRate / fromRate) * searchValue).toFixed(2)}</td>
                </tr>`;
            console.log(((toRate / fromRate) * searchValue))

            var tableBody = document.querySelector("tbody");
            tableBody.innerHTML = str;
        }

        // convert button
        submitBtn.addEventListener("click", function (e) {
            e.preventDefault()
            if (searchValue === "" || searchValue === undefined) {
                alert("Please enter amount")
            } else {
                populate()
            }

        })


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>